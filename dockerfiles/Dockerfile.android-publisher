FROM 855461928731.dkr.ecr.us-west-1.amazonaws.com/android:performance-release as android

WORKDIR /app

# Copy gradle files
COPY gradlew gradle.properties /app/
COPY gradle/ /app/gradle/
COPY build.gradle.kts settings.gradle.kts /app/

# Copy sdk source files
COPY bugsnag-android-performance/ bugsnag-android-performance/
COPY bugsnag-android-performance-api/ bugsnag-android-performance-api/
COPY bugsnag-android-performance-impl/ bugsnag-android-performance-impl/
COPY bugsnag-android-performance-appcompat/ bugsnag-android-performance-appcompat/
COPY bugsnag-android-performance-compose/ bugsnag-android-performance-compose/
COPY bugsnag-android-performance-coroutines/ bugsnag-android-performance-coroutines/
COPY bugsnag-android-performance-okhttp/ bugsnag-android-performance-okhttp/

COPY bugsnag-plugin-android-performance-named-spans/ bugsnag-plugin-android-performance-named-spans/
COPY scripts/ scripts/
COPY LICENSE LICENSE

CMD "scripts/docker-publish.sh"
